import z from"js-yaml";function O(e){if(typeof e=="object"&&e!==null)return e;let t=String(e||"");try{return z.load(t)}catch(a){try{return JSON.parse(t)}catch{throw new Error("Invalid YAML/JSON config: "+a.message)}}}var c=Object.create(null);c.isEven=e=>{let t=Number(e);return!Number.isNaN(t)&&t%2===0};c.mustContainXYZ=e=>String(e??"").includes("XYZ");c.afterDate=(e,t,a)=>{var o;let s=(o=a==null?void 0:a.extra)==null?void 0:o.after;if(!s)return!1;let r=new Date(e),n=new Date(s);return!Number.isNaN(r.getTime())&&r>n};c.matchesRegex=(e,t,a)=>{var s,r;try{let n=(s=a==null?void 0:a.extra)==null?void 0:s.pattern;if(!n)return!1;let o=((r=a==null?void 0:a.extra)==null?void 0:r.flags)||"";return new RegExp(n,o).test(String(e??""))}catch{return!1}};c.usernameAvailable=async(e,t,a)=>{var o;let s=(o=a==null?void 0:a.extra)==null?void 0:o.endpoint;return s?(await(await fetch(`${s}?username=${encodeURIComponent(e)}`)).json()).available:!1};function b(e){return c[e]}var $={};function u(e,t){$[e]=t}function N(e){return $[e]}u("required",async(e,t)=>t===""?{valid:!1,message:e.message||"This field is required"}:{valid:!0});u("regex",async(e,t)=>{var a,s;try{return new RegExp(e.pattern||((a=e.extra)==null?void 0:a.pattern),e.flags||((s=e.extra)==null?void 0:s.flags)||"").test(t)?{valid:!0}:{valid:!1,message:e.message||"Invalid format"}}catch{return{valid:!1,message:e.message||"Invalid regex pattern"}}});u("length",async(e,t)=>{let{min:a,max:s,eq:r}=e;return typeof r=="number"&&t.length!==r?{valid:!1,message:e.eqMessage||`Length must be ${r}`}:typeof a=="number"&&t.length<a?{valid:!1,message:e.minMessage||`Length must be \u2265 ${a}`}:typeof s=="number"&&t.length>s?{valid:!1,message:e.maxMessage||`Length must be \u2264 ${s}`}:{valid:!0}});u("numberRange",async(e,t)=>{let a=Number(t);if(isNaN(a))return{valid:!1,message:e.message||"Must be a number"};let{min:s,max:r}=e;return typeof s=="number"&&a<s?{valid:!1,message:e.minMessage||`Must be \u2265 ${s}`}:typeof r=="number"&&a>r?{valid:!1,message:e.maxMessage||`Must be \u2264 ${r}`}:{valid:!0}});u("crossField",async(e,t,a)=>{let s=a==null?void 0:a[e.field];return t!==s?{valid:!1,message:e.message||`Must match ${e.field}`}:{valid:!0}});u("date",async(e,t)=>{if(!t)return{valid:!0};let a=new Date(t);if(Number.isNaN(a.getTime()))return{valid:!1,message:e.message||"Invalid date"};let s=new Date;return s.setHours(0,0,0,0),e.mustBePast&&a>=s?{valid:!1,message:e.message||"Date must be before today"}:e.mustBeFuture&&a<=s?{valid:!1,message:e.message||"Date must be after today"}:e.before&&a>=new Date(e.before)?{valid:!1,message:e.message||`Date must be before ${e.before}`}:e.after&&a<=new Date(e.after)?{valid:!1,message:e.message||`Date must be after ${e.after}`}:{valid:!0}});u("select",async(e,t)=>t?(e.options||[]).includes(t)?{valid:!0}:{valid:!1,message:e.message||"Invalid selection"}:{valid:!0});u("custom",async(e,t,a)=>{let s=b(e.custom);if(typeof s!="function")return{valid:!1,message:e.message||`Unknown custom rule: ${e.custom}`};try{return await Promise.resolve(s(t,a,e))?{valid:!0}:{valid:!1,message:e.message||"Invalid value"}}catch{return{valid:!1,message:e.message||"Custom rule failed"}}});function B(e,t){if(!e.when)return!0;let{field:a,equals:s,notEmpty:r,notEquals:n,in:o,notIn:d}=e.when,m=t==null?void 0:t[a];return s!==void 0?m===s:n!==void 0?m!==n:r?m!=null&&String(m).trim()!=="":Array.isArray(o)?o.includes(m):Array.isArray(d)?!d.includes(m):!0}function R(e,t,a){let s=String(e??"").trim();return(t==null?void 0:t.type)==="email"&&(s=s.toLowerCase()),a.uppercase&&(s=s.toUpperCase()),s}function f(e,t="message",a="en"){if(typeof e[t]=="string")return e[t];if(typeof e[t]=="object")return e[t][a]||e[t].en}async function E(e,t,a,s,r="en"){if(!B(e,a))return{valid:!0};let n=R(t,s,e),o=N(e.type);if(e.type==="custom"){let m=b(e.custom);if(typeof m!="function")return{valid:!1,message:f(e,"message",r)||`Unknown custom rule: ${e.custom}`};try{return await Promise.resolve(m(t,a,e))?{valid:!0}:{valid:!1,message:f(e,"message",r)||"Invalid value"}}catch{return{valid:!1,message:f(e,"message",r)||"Custom rule failed"}}}if(!o)return{valid:!0};let d=await o(e,n,a,s);return d.valid||(d.message=f(e,"message",r)||d.message),d}async function g(e,t,a={},s="en"){for(let r of e.validation||[]){let n=await E(r,t,a,e,s);if(!n.valid)return n}return{valid:!0}}async function x(e=[],t={},a="en"){let s=await Promise.all(e.map(n=>g(n,t[n.name],t,a))),r={};return e.forEach((n,o)=>{s[o].valid||(r[n.name]=s[o].message)}),{valid:Object.keys(r).length===0,errors:r}}import p,{useState as P}from"react";function A({config:e,onSubmit:t}){var m;let[a,s]=P({}),[r,n]=P({});if(!((m=e==null?void 0:e.fields)!=null&&m.length))return p.createElement("div",null,"No fields configured");let o=async(i,l)=>{let v=i.target.value,w=v,C=!1;if(l.allowedChars){let y=v.split("").filter(S=>l.allowedChars.test(S)).join("");y!==v&&(C=!0,w=y)}let I={...a,[l.name]:w};s(I);let q=await g(l,w,I);n(y=>({...y,[l.name]:C?l.messageOnInvalid||"Invalid character entered":q.valid?null:q.message}))};return p.createElement("form",{onSubmit:async i=>{i.preventDefault();let l=await x(e.fields,a);n(l.errors),l.valid&&t(a)}},e.fields.map(i=>p.createElement("div",{key:i.name,style:{marginBottom:"1rem"}},p.createElement("label",{htmlFor:i.name},i.label),p.createElement("input",{id:i.name,name:i.name,type:i.type||"text",value:a[i.name]||"",onChange:l=>o(l,i),maxLength:i.max||void 0,"aria-invalid":!!r[i.name],"aria-describedby":`${i.name}-error`}),r[i.name]&&p.createElement("div",{id:`${i.name}-error`,style:{color:"red"}},r[i.name]))),p.createElement("button",{type:"submit"},"Submit"))}var h={};function M(e,t){if(typeof e!="string"||typeof t!="function")throw new Error("addCustom requires a string key and a function");h[e]=t}function F(e){delete h[e]}function Z(e){return h[e]}function D(){return Object.keys(h)}var ee={name:"name",label:"Full Name",type:"text",validation:[{type:"required",message:"Name is required"},{type:"regex",pattern:"^[A-Za-z\\s]+$",message:"Name can only contain alphabets and spaces"},{type:"length",min:2,max:50,minMessage:"Name must be at least 2 characters",maxMessage:"Name must be at most 50 characters"}],max:50,allowedChars:/^[A-Za-z\s]$/,messageOnInvalid:"Only alphabets and spaces are allowed"},ae={name:"pincode",label:"PIN Code",type:"text",validation:[{type:"required",message:"PIN Code is required"},{type:"regex",pattern:"^\\d{6}$",message:"PIN Code must be exactly 6 digits (numbers only)"},{type:"length",eq:6,eqMessage:"PIN Code must be exactly 6 digits"}],max:6,allowedChars:/^[0-9]$/,messageOnInvalid:"Only digits are allowed in PIN Code"},te={name:"email",label:"Email Address",type:"email",validation:[{type:"required",message:"Email is required"},{type:"regex",pattern:"^[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\\.[A-Za-z]{2,}$",message:"Invalid email address format"}],allowedChars:/^[A-Za-z0-9._%+-@]$/,messageOnInvalid:"Only letters, numbers, and email special characters are allowed"},se={name:"address",label:"Address",type:"text",validation:[{type:"required",message:"Address is required"},{type:"regex",pattern:"^[A-Za-z0-9\\s,.-]{5,100}$",message:"Address must be 5\u2013100 characters, alphanumeric only"},{type:"length",min:5,max:100,minMessage:"Address must be at least 5 characters",maxMessage:"Address must be at most 100 characters"}],max:100,allowedChars:/^[A-Za-z0-9\s,.-]$/,messageOnInvalid:"Only letters, numbers, spaces, commas, dots, and hyphens are allowed"},re={name:"phone",label:"Phone Number",type:"tel",validation:[{type:"required",message:"Phone number is required"},{type:"regex",pattern:"^\\d{10}$",message:"Phone number must be exactly 10 digits"},{type:"length",eq:10,eqMessage:"Phone number must be exactly 10 digits"}],max:10,allowedChars:/^[0-9]$/,messageOnInvalid:"Only digits are allowed in Phone Number"},ne={name:"gender",label:"Gender",type:"select",options:["Male","Female","Other"],validation:[{type:"required",message:"Gender is required"},{type:"select",options:["Male","Female","Other"],message:"Invalid Gender selection"}]},ie={name:"password",label:"Password",type:"password",validation:[{type:"required",message:"Password is required"},{type:"regex",pattern:"^(?=.*[A-Z])(?=.*[a-z])(?=.*\\d)(?=.*[@$!%*?&])[A-Za-z\\d@$!%*?&]{8,}$",message:"Password must be at least 8 characters, include uppercase, lowercase, number, and special character"},{type:"length",min:8,minMessage:"Password must be at least 8 characters"}],min:8,allowedChars:/^[A-Za-z0-9@$!%*?&]$/,messageOnInvalid:"Only letters, numbers, and @$!%*?& characters are allowed"},oe={name:"confirmPassword",label:"Confirm Password",type:"password",validation:[{type:"required",message:"Confirm Password is required"},{type:"crossField",field:"password",message:"Passwords must match"}],allowedChars:/^[A-Za-z0-9@$!%*?&]$/,messageOnInvalid:"Only letters, numbers, and @$!%*?& characters are allowed"},me={name:"dob",label:"Date of Birth",type:"date",validation:[{type:"required",message:"Date of Birth is required"},{type:"date",mustBePast:!0,message:"Date of Birth must be before today"}],max:new Date(Date.now()-864e5).toISOString().split("T")[0]},le={name:"username",label:"Username",type:"text",validation:[{type:"required",message:"Username is required"},{type:"regex",pattern:"^[A-Za-z0-9_]{5,20}$",message:"Username must be 5\u201320 characters, letters/numbers/underscores only"},{type:"length",min:5,max:20,minMessage:"Username must be at least 5 characters",maxMessage:"Username must be at most 20 characters"}],min:5,max:20,allowedChars:/^[A-Za-z0-9_]$/,messageOnInvalid:"Only letters, numbers, and underscores are allowed"},de={name:"otp",label:"OTP",type:"text",validation:[{type:"required",message:"OTP is required"},{type:"regex",pattern:"^\\d{6}$",message:"OTP must be exactly 6 digits"},{type:"length",eq:6,eqMessage:"OTP must be exactly 6 digits"}],max:6,allowedChars:/^[0-9]$/,messageOnInvalid:"Only digits are allowed in OTP"},ue={name:"alternateEmail",label:"Alternate Email",type:"email",validation:[{type:"regex",pattern:"^[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\\.[A-Za-z]{2,}$",message:"Invalid email address format"}],allowedChars:/^[A-Za-z0-9._%+-@]$/,messageOnInvalid:"Only letters, numbers, and email special characters are allowed"},pe={name:"alternatePhone",label:"Alternate Phone Number",type:"tel",validation:[{type:"regex",pattern:"^\\d{10}$",message:"Phone number must be exactly 10 digits"}],max:10,allowedChars:/^[0-9]$/,messageOnInvalid:"Only digits are allowed in Phone Number"},ce={name:"age",label:"Age",type:"number",validation:[{type:"required",message:"Age is required"},{type:"numberRange",min:18,max:65,message:"Age must be between {min} and {max}"}]};var ye={name:"pan",label:"PAN Number",type:"text",validation:[{type:"required",message:"PAN is required"},{type:"regex",pattern:"^[A-Z]{5}[0-9]{4}[A-Z]$",message:"Invalid PAN format (e.g., ABCDE1234F)",uppercase:!0},{type:"length",eq:10,eqMessage:"PAN must be exactly 10 characters"}],min:10,max:10,allowedChars:/^[A-Z0-9]$/,messageOnInvalid:"Only uppercase letters and digits are allowed"},be={name:"ifsc",label:"IFSC Code",type:"text",validation:[{type:"required",message:"IFSC Code is required"},{type:"regex",pattern:"^[A-Z]{4}0[A-Z0-9]{6}$",message:"Invalid IFSC format (e.g., SBIN0001234)",uppercase:!0},{type:"length",eq:11,eqMessage:"IFSC Code must be exactly 11 characters"}],min:11,max:11,allowedChars:/^[A-Z0-9]$/,messageOnInvalid:"Only uppercase letters and digits are allowed"},fe={name:"aadhaar",label:"Aadhaar Number",type:"text",validation:[{type:"required",message:"Aadhaar is required"},{type:"regex",pattern:"^\\d{12}$",message:"Aadhaar must be exactly 12 digits"},{type:"length",eq:12,eqMessage:"Aadhaar must be exactly 12 digits"}],min:12,max:12,allowedChars:/^[0-9]$/,messageOnInvalid:"Only digits are allowed in Aadhaar Number"},xe={name:"gst",label:"GST Number",type:"text",validation:[{type:"required",message:"GST Number is required"},{type:"regex",pattern:"^[0-9]{2}[A-Z]{5}[0-9]{4}[A-Z]{1}[1-9A-Z]{1}Z[0-9A-Z]{1}$",message:"Invalid GST format",uppercase:!0},{type:"length",eq:15,eqMessage:"GST Number must be exactly 15 characters"}],min:15,max:15,allowedChars:/^[A-Z0-9]$/,messageOnInvalid:"Only uppercase letters and digits are allowed"},he={name:"accountNumber",label:"Bank Account Number",type:"text",validation:[{type:"required",message:"Account Number is required"},{type:"regex",pattern:"^[0-9]{9,18}$",message:"Account Number must be 9\u201318 digits"},{type:"length",min:9,max:18,minMessage:"Account Number must be at least 9 digits",maxMessage:"Account Number must be at most 18 digits"}],min:9,max:18,allowedChars:/^[0-9]$/,messageOnInvalid:"Only digits are allowed in Account Number"},ve={name:"micr",label:"MICR Code",type:"text",validation:[{type:"required",message:"MICR Code is required"},{type:"regex",pattern:"^[0-9]{9}$",message:"MICR Code must be exactly 9 digits"},{type:"length",eq:9,eqMessage:"MICR Code must be exactly 9 digits"}],min:9,max:9,allowedChars:/^[0-9]$/,messageOnInvalid:"Only digits are allowed in MICR Code"};var Ae={name:"patientId",label:"Patient ID",type:"text",validation:[{type:"required",message:"Patient ID is required"},{type:"regex",pattern:"^[A-Z0-9]{8}$",message:"Invalid Patient ID (must be 8 uppercase letters/digits)",uppercase:!0},{type:"length",eq:8,eqMessage:"Patient ID must be exactly 8 characters"}],min:8,max:8,allowedChars:/^[A-Z0-9]$/,messageOnInvalid:"Only uppercase letters and digits are allowed"},Ce={name:"insurance",label:"Insurance Policy Number",type:"text",validation:[{type:"required",message:"Insurance Policy Number is required"},{type:"regex",pattern:"^[A-Z]{2}[0-9]{6}$",message:"Invalid Insurance Policy Number (e.g., AB123456)",uppercase:!0},{type:"length",eq:8,eqMessage:"Insurance Policy Number must be exactly 8 characters"}],min:8,max:8,allowedChars:/^[A-Z0-9]$/,messageOnInvalid:"Only uppercase letters and digits are allowed"},Ie={name:"healthId",label:"Health ID",type:"text",validation:[{type:"required",message:"Health ID is required"},{type:"regex",pattern:"^[A-Z0-9]{10,16}$",message:"Invalid Health ID (must be 10\u201316 uppercase letters/digits)",uppercase:!0},{type:"length",min:10,max:16,minMessage:"Health ID must be at least 10 characters",maxMessage:"Health ID must be at most 16 characters"}],min:10,max:16,allowedChars:/^[A-Z0-9]$/,messageOnInvalid:"Only uppercase letters and digits are allowed"},qe={name:"bloodGroup",label:"Blood Group",type:"select",options:["A+","A-","B+","B-","O+","O-","AB+","AB-"],validation:[{type:"required",message:"Blood Group is required"},{type:"select",options:["A+","A-","B+","B-","O+","O-","AB+","AB-"],message:"Invalid Blood Group"}]},Oe={name:"medicalRecord",label:"Medical Record Number",type:"text",validation:[{type:"required",message:"Medical Record Number is required"},{type:"regex",pattern:"^[0-9]{6,12}$",message:"Invalid Medical Record Number (must be 6\u201312 digits)"},{type:"length",min:6,max:12,minMessage:"Medical Record Number must be at least 6 digits",maxMessage:"Medical Record Number must be at most 12 digits"}],min:6,max:12,allowedChars:/^[0-9]$/,messageOnInvalid:"Only digits are allowed"};var Ze={parseConfig:O,validateField:g,validateAll:x,FormRenderer:A,addCustom:M,removeCustom:F,getCustom:Z,listCustom:D};export{fe as AadhaarField,he as AccountNumberField,se as AddressField,ce as AgeField,ue as AlternateEmailField,pe as AlternatePhoneField,qe as BloodGroupField,oe as ConfirmPasswordField,me as DobField,te as EmailField,A as FormRenderer,xe as GSTField,ne as GenderField,Ie as HealthIDField,be as IFSCField,Ce as InsuranceField,ve as MICRField,Oe as MedicalRecordField,ee as NameField,de as OTPField,ye as PANField,ie as PasswordField,Ae as PatientIDField,re as PhoneField,ae as PincodeField,le as UsernameField,M as addCustom,Ze as default,Z as getCustom,D as listCustom,O as parseConfig,F as removeCustom,x as validateAll,g as validateField};
