var E=Object.create;var f=Object.defineProperty;var T=Object.getOwnPropertyDescriptor;var k=Object.getOwnPropertyNames;var G=Object.getPrototypeOf,U=Object.prototype.hasOwnProperty;var _=(e,a)=>{for(var t in a)f(e,t,{get:a[t],enumerable:!0})},Z=(e,a,t,s)=>{if(a&&typeof a=="object"||typeof a=="function")for(let r of k(a))!U.call(e,r)&&r!==t&&f(e,r,{get:()=>a[r],enumerable:!(s=T(a,r))||s.enumerable});return e};var D=(e,a,t)=>(t=e!=null?E(G(e)):{},Z(a||!e||!e.__esModule?f(t,"default",{value:e,enumerable:!0}):t,e)),j=e=>Z(f({},"__esModule",{value:!0}),e);var ve={};_(ve,{AadhaarField:()=>de,AccountNumberField:()=>pe,AddressField:()=>K,AgeField:()=>oe,AlternateEmailField:()=>ne,AlternatePhoneField:()=>ie,BloodGroupField:()=>fe,ConfirmPasswordField:()=>ae,DobField:()=>te,EmailField:()=>X,FormRenderer:()=>v,GSTField:()=>ue,GenderField:()=>W,HealthIDField:()=>be,IFSCField:()=>le,InsuranceField:()=>ye,MICRField:()=>ce,MedicalRecordField:()=>xe,NameField:()=>Y,OTPField:()=>re,PANField:()=>me,PasswordField:()=>ee,PatientIDField:()=>ge,PhoneField:()=>Q,PincodeField:()=>J,UsernameField:()=>se,addCustom:()=>q,default:()=>he,getCustom:()=>$,listCustom:()=>N,parseConfig:()=>I,removeCustom:()=>O,validateAll:()=>y,validateField:()=>g});module.exports=j(ve);var S=D(require("js-yaml"),1);function I(e){if(typeof e=="object"&&e!==null)return e;let a=String(e||"");try{return S.default.load(a)}catch(t){try{return JSON.parse(a)}catch{throw new Error("Invalid YAML/JSON config: "+t.message)}}}var c=Object.create(null);c.isEven=e=>{let a=Number(e);return!Number.isNaN(a)&&a%2===0};c.mustContainXYZ=e=>String(e??"").includes("XYZ");c.afterDate=(e,a,t)=>{var o;let s=(o=t==null?void 0:t.extra)==null?void 0:o.after;if(!s)return!1;let r=new Date(e),n=new Date(s);return!Number.isNaN(r.getTime())&&r>n};c.matchesRegex=(e,a,t)=>{var s,r;try{let n=(s=t==null?void 0:t.extra)==null?void 0:s.pattern;if(!n)return!1;let o=((r=t==null?void 0:t.extra)==null?void 0:r.flags)||"";return new RegExp(n,o).test(String(e??""))}catch{return!1}};c.usernameAvailable=async(e,a,t)=>{var o;let s=(o=t==null?void 0:t.extra)==null?void 0:o.endpoint;return s?(await(await fetch(`${s}?username=${encodeURIComponent(e)}`)).json()).available:!1};function x(e){return c[e]}var z={};function p(e,a){z[e]=a}function B(e){return z[e]}p("required",async(e,a)=>a===""?{valid:!1,message:e.message||"This field is required"}:{valid:!0});p("regex",async(e,a)=>{var t,s;try{return new RegExp(e.pattern||((t=e.extra)==null?void 0:t.pattern),e.flags||((s=e.extra)==null?void 0:s.flags)||"").test(a)?{valid:!0}:{valid:!1,message:e.message||"Invalid format"}}catch{return{valid:!1,message:e.message||"Invalid regex pattern"}}});p("length",async(e,a)=>{let{min:t,max:s,eq:r}=e;return typeof r=="number"&&a.length!==r?{valid:!1,message:e.eqMessage||`Length must be ${r}`}:typeof t=="number"&&a.length<t?{valid:!1,message:e.minMessage||`Length must be \u2265 ${t}`}:typeof s=="number"&&a.length>s?{valid:!1,message:e.maxMessage||`Length must be \u2264 ${s}`}:{valid:!0}});p("numberRange",async(e,a)=>{let t=Number(a);if(isNaN(t))return{valid:!1,message:e.message||"Must be a number"};let{min:s,max:r}=e;return typeof s=="number"&&t<s?{valid:!1,message:e.minMessage||`Must be \u2265 ${s}`}:typeof r=="number"&&t>r?{valid:!1,message:e.maxMessage||`Must be \u2264 ${r}`}:{valid:!0}});p("crossField",async(e,a,t)=>{let s=t==null?void 0:t[e.field];return a!==s?{valid:!1,message:e.message||`Must match ${e.field}`}:{valid:!0}});p("date",async(e,a)=>{if(!a)return{valid:!0};let t=new Date(a);if(Number.isNaN(t.getTime()))return{valid:!1,message:e.message||"Invalid date"};let s=new Date;return s.setHours(0,0,0,0),e.mustBePast&&t>=s?{valid:!1,message:e.message||"Date must be before today"}:e.mustBeFuture&&t<=s?{valid:!1,message:e.message||"Date must be after today"}:e.before&&t>=new Date(e.before)?{valid:!1,message:e.message||`Date must be before ${e.before}`}:e.after&&t<=new Date(e.after)?{valid:!1,message:e.message||`Date must be after ${e.after}`}:{valid:!0}});p("select",async(e,a)=>a?(e.options||[]).includes(a)?{valid:!0}:{valid:!1,message:e.message||"Invalid selection"}:{valid:!0});p("custom",async(e,a,t)=>{let s=x(e.custom);if(typeof s!="function")return{valid:!1,message:e.message||`Unknown custom rule: ${e.custom}`};try{return await Promise.resolve(s(a,t,e))?{valid:!0}:{valid:!1,message:e.message||"Invalid value"}}catch{return{valid:!1,message:e.message||"Custom rule failed"}}});function H(e,a){if(!e.when)return!0;let{field:t,equals:s,notEmpty:r,notEquals:n,in:o,notIn:u}=e.when,m=a==null?void 0:a[t];return s!==void 0?m===s:n!==void 0?m!==n:r?m!=null&&String(m).trim()!=="":Array.isArray(o)?o.includes(m):Array.isArray(u)?!u.includes(m):!0}function L(e,a,t){let s=String(e??"").trim();return(a==null?void 0:a.type)==="email"&&(s=s.toLowerCase()),t.uppercase&&(s=s.toUpperCase()),s}function h(e,a="message",t="en"){if(typeof e[a]=="string")return e[a];if(typeof e[a]=="object")return e[a][t]||e[a].en}async function V(e,a,t,s,r="en"){if(!H(e,t))return{valid:!0};let n=L(a,s,e),o=B(e.type);if(e.type==="custom"){let m=x(e.custom);if(typeof m!="function")return{valid:!1,message:h(e,"message",r)||`Unknown custom rule: ${e.custom}`};try{return await Promise.resolve(m(a,t,e))?{valid:!0}:{valid:!1,message:h(e,"message",r)||"Invalid value"}}catch{return{valid:!1,message:h(e,"message",r)||"Custom rule failed"}}}if(!o)return{valid:!0};let u=await o(e,n,t,s);return u.valid||(u.message=h(e,"message",r)||u.message),u}async function g(e,a,t={},s="en"){for(let r of e.validation||[]){let n=await V(r,a,t,e,s);if(!n.valid)return n}return{valid:!0}}async function y(e=[],a={},t="en"){let s=await Promise.all(e.map(n=>g(n,a[n.name],a,t))),r={};return e.forEach((n,o)=>{s[o].valid||(r[n.name]=s[o].message)}),{valid:Object.keys(r).length===0,errors:r}}var d=D(require("react"),1);function v({config:e,onSubmit:a}){var m;let[t,s]=(0,d.useState)({}),[r,n]=(0,d.useState)({});if(!((m=e==null?void 0:e.fields)!=null&&m.length))return d.default.createElement("div",null,"No fields configured");let o=async(i,l)=>{let A=i.target.value,C=A,P=!1;if(l.allowedChars){let b=A.split("").filter(R=>l.allowedChars.test(R)).join("");b!==A&&(P=!0,C=b)}let M={...t,[l.name]:C};s(M);let F=await g(l,C,M);n(b=>({...b,[l.name]:P?l.messageOnInvalid||"Invalid character entered":F.valid?null:F.message}))};return d.default.createElement("form",{onSubmit:async i=>{i.preventDefault();let l=await y(e.fields,t);n(l.errors),l.valid&&a(t)}},e.fields.map(i=>d.default.createElement("div",{key:i.name,style:{marginBottom:"1rem"}},d.default.createElement("label",{htmlFor:i.name},i.label),d.default.createElement("input",{id:i.name,name:i.name,type:i.type||"text",value:t[i.name]||"",onChange:l=>o(l,i),maxLength:i.max||void 0,"aria-invalid":!!r[i.name],"aria-describedby":`${i.name}-error`}),r[i.name]&&d.default.createElement("div",{id:`${i.name}-error`,style:{color:"red"}},r[i.name]))),d.default.createElement("button",{type:"submit"},"Submit"))}var w={};function q(e,a){if(typeof e!="string"||typeof a!="function")throw new Error("addCustom requires a string key and a function");w[e]=a}function O(e){delete w[e]}function $(e){return w[e]}function N(){return Object.keys(w)}var Y={name:"name",label:"Full Name",type:"text",validation:[{type:"required",message:"Name is required"},{type:"regex",pattern:"^[A-Za-z\\s]+$",message:"Name can only contain alphabets and spaces"},{type:"length",min:2,max:50,minMessage:"Name must be at least 2 characters",maxMessage:"Name must be at most 50 characters"}],max:50,allowedChars:/^[A-Za-z\s]$/,messageOnInvalid:"Only alphabets and spaces are allowed"},J={name:"pincode",label:"PIN Code",type:"text",validation:[{type:"required",message:"PIN Code is required"},{type:"regex",pattern:"^\\d{6}$",message:"PIN Code must be exactly 6 digits (numbers only)"},{type:"length",eq:6,eqMessage:"PIN Code must be exactly 6 digits"}],max:6,allowedChars:/^[0-9]$/,messageOnInvalid:"Only digits are allowed in PIN Code"},X={name:"email",label:"Email Address",type:"email",validation:[{type:"required",message:"Email is required"},{type:"regex",pattern:"^[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\\.[A-Za-z]{2,}$",message:"Invalid email address format"}],allowedChars:/^[A-Za-z0-9._%+-@]$/,messageOnInvalid:"Only letters, numbers, and email special characters are allowed"},K={name:"address",label:"Address",type:"text",validation:[{type:"required",message:"Address is required"},{type:"regex",pattern:"^[A-Za-z0-9\\s,.-]{5,100}$",message:"Address must be 5\u2013100 characters, alphanumeric only"},{type:"length",min:5,max:100,minMessage:"Address must be at least 5 characters",maxMessage:"Address must be at most 100 characters"}],max:100,allowedChars:/^[A-Za-z0-9\s,.-]$/,messageOnInvalid:"Only letters, numbers, spaces, commas, dots, and hyphens are allowed"},Q={name:"phone",label:"Phone Number",type:"tel",validation:[{type:"required",message:"Phone number is required"},{type:"regex",pattern:"^\\d{10}$",message:"Phone number must be exactly 10 digits"},{type:"length",eq:10,eqMessage:"Phone number must be exactly 10 digits"}],max:10,allowedChars:/^[0-9]$/,messageOnInvalid:"Only digits are allowed in Phone Number"},W={name:"gender",label:"Gender",type:"select",options:["Male","Female","Other"],validation:[{type:"required",message:"Gender is required"},{type:"select",options:["Male","Female","Other"],message:"Invalid Gender selection"}]},ee={name:"password",label:"Password",type:"password",validation:[{type:"required",message:"Password is required"},{type:"regex",pattern:"^(?=.*[A-Z])(?=.*[a-z])(?=.*\\d)(?=.*[@$!%*?&])[A-Za-z\\d@$!%*?&]{8,}$",message:"Password must be at least 8 characters, include uppercase, lowercase, number, and special character"},{type:"length",min:8,minMessage:"Password must be at least 8 characters"}],min:8,allowedChars:/^[A-Za-z0-9@$!%*?&]$/,messageOnInvalid:"Only letters, numbers, and @$!%*?& characters are allowed"},ae={name:"confirmPassword",label:"Confirm Password",type:"password",validation:[{type:"required",message:"Confirm Password is required"},{type:"crossField",field:"password",message:"Passwords must match"}],allowedChars:/^[A-Za-z0-9@$!%*?&]$/,messageOnInvalid:"Only letters, numbers, and @$!%*?& characters are allowed"},te={name:"dob",label:"Date of Birth",type:"date",validation:[{type:"required",message:"Date of Birth is required"},{type:"date",mustBePast:!0,message:"Date of Birth must be before today"}],max:new Date(Date.now()-864e5).toISOString().split("T")[0]},se={name:"username",label:"Username",type:"text",validation:[{type:"required",message:"Username is required"},{type:"regex",pattern:"^[A-Za-z0-9_]{5,20}$",message:"Username must be 5\u201320 characters, letters/numbers/underscores only"},{type:"length",min:5,max:20,minMessage:"Username must be at least 5 characters",maxMessage:"Username must be at most 20 characters"}],min:5,max:20,allowedChars:/^[A-Za-z0-9_]$/,messageOnInvalid:"Only letters, numbers, and underscores are allowed"},re={name:"otp",label:"OTP",type:"text",validation:[{type:"required",message:"OTP is required"},{type:"regex",pattern:"^\\d{6}$",message:"OTP must be exactly 6 digits"},{type:"length",eq:6,eqMessage:"OTP must be exactly 6 digits"}],max:6,allowedChars:/^[0-9]$/,messageOnInvalid:"Only digits are allowed in OTP"},ne={name:"alternateEmail",label:"Alternate Email",type:"email",validation:[{type:"regex",pattern:"^[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\\.[A-Za-z]{2,}$",message:"Invalid email address format"}],allowedChars:/^[A-Za-z0-9._%+-@]$/,messageOnInvalid:"Only letters, numbers, and email special characters are allowed"},ie={name:"alternatePhone",label:"Alternate Phone Number",type:"tel",validation:[{type:"regex",pattern:"^\\d{10}$",message:"Phone number must be exactly 10 digits"}],max:10,allowedChars:/^[0-9]$/,messageOnInvalid:"Only digits are allowed in Phone Number"},oe={name:"age",label:"Age",type:"number",validation:[{type:"required",message:"Age is required"},{type:"numberRange",min:18,max:65,message:"Age must be between {min} and {max}"}]};var me={name:"pan",label:"PAN Number",type:"text",validation:[{type:"required",message:"PAN is required"},{type:"regex",pattern:"^[A-Z]{5}[0-9]{4}[A-Z]$",message:"Invalid PAN format (e.g., ABCDE1234F)",uppercase:!0},{type:"length",eq:10,eqMessage:"PAN must be exactly 10 characters"}],min:10,max:10,allowedChars:/^[A-Z0-9]$/,messageOnInvalid:"Only uppercase letters and digits are allowed"},le={name:"ifsc",label:"IFSC Code",type:"text",validation:[{type:"required",message:"IFSC Code is required"},{type:"regex",pattern:"^[A-Z]{4}0[A-Z0-9]{6}$",message:"Invalid IFSC format (e.g., SBIN0001234)",uppercase:!0},{type:"length",eq:11,eqMessage:"IFSC Code must be exactly 11 characters"}],min:11,max:11,allowedChars:/^[A-Z0-9]$/,messageOnInvalid:"Only uppercase letters and digits are allowed"},de={name:"aadhaar",label:"Aadhaar Number",type:"text",validation:[{type:"required",message:"Aadhaar is required"},{type:"regex",pattern:"^\\d{12}$",message:"Aadhaar must be exactly 12 digits"},{type:"length",eq:12,eqMessage:"Aadhaar must be exactly 12 digits"}],min:12,max:12,allowedChars:/^[0-9]$/,messageOnInvalid:"Only digits are allowed in Aadhaar Number"},ue={name:"gst",label:"GST Number",type:"text",validation:[{type:"required",message:"GST Number is required"},{type:"regex",pattern:"^[0-9]{2}[A-Z]{5}[0-9]{4}[A-Z]{1}[1-9A-Z]{1}Z[0-9A-Z]{1}$",message:"Invalid GST format",uppercase:!0},{type:"length",eq:15,eqMessage:"GST Number must be exactly 15 characters"}],min:15,max:15,allowedChars:/^[A-Z0-9]$/,messageOnInvalid:"Only uppercase letters and digits are allowed"},pe={name:"accountNumber",label:"Bank Account Number",type:"text",validation:[{type:"required",message:"Account Number is required"},{type:"regex",pattern:"^[0-9]{9,18}$",message:"Account Number must be 9\u201318 digits"},{type:"length",min:9,max:18,minMessage:"Account Number must be at least 9 digits",maxMessage:"Account Number must be at most 18 digits"}],min:9,max:18,allowedChars:/^[0-9]$/,messageOnInvalid:"Only digits are allowed in Account Number"},ce={name:"micr",label:"MICR Code",type:"text",validation:[{type:"required",message:"MICR Code is required"},{type:"regex",pattern:"^[0-9]{9}$",message:"MICR Code must be exactly 9 digits"},{type:"length",eq:9,eqMessage:"MICR Code must be exactly 9 digits"}],min:9,max:9,allowedChars:/^[0-9]$/,messageOnInvalid:"Only digits are allowed in MICR Code"};var ge={name:"patientId",label:"Patient ID",type:"text",validation:[{type:"required",message:"Patient ID is required"},{type:"regex",pattern:"^[A-Z0-9]{8}$",message:"Invalid Patient ID (must be 8 uppercase letters/digits)",uppercase:!0},{type:"length",eq:8,eqMessage:"Patient ID must be exactly 8 characters"}],min:8,max:8,allowedChars:/^[A-Z0-9]$/,messageOnInvalid:"Only uppercase letters and digits are allowed"},ye={name:"insurance",label:"Insurance Policy Number",type:"text",validation:[{type:"required",message:"Insurance Policy Number is required"},{type:"regex",pattern:"^[A-Z]{2}[0-9]{6}$",message:"Invalid Insurance Policy Number (e.g., AB123456)",uppercase:!0},{type:"length",eq:8,eqMessage:"Insurance Policy Number must be exactly 8 characters"}],min:8,max:8,allowedChars:/^[A-Z0-9]$/,messageOnInvalid:"Only uppercase letters and digits are allowed"},be={name:"healthId",label:"Health ID",type:"text",validation:[{type:"required",message:"Health ID is required"},{type:"regex",pattern:"^[A-Z0-9]{10,16}$",message:"Invalid Health ID (must be 10\u201316 uppercase letters/digits)",uppercase:!0},{type:"length",min:10,max:16,minMessage:"Health ID must be at least 10 characters",maxMessage:"Health ID must be at most 16 characters"}],min:10,max:16,allowedChars:/^[A-Z0-9]$/,messageOnInvalid:"Only uppercase letters and digits are allowed"},fe={name:"bloodGroup",label:"Blood Group",type:"select",options:["A+","A-","B+","B-","O+","O-","AB+","AB-"],validation:[{type:"required",message:"Blood Group is required"},{type:"select",options:["A+","A-","B+","B-","O+","O-","AB+","AB-"],message:"Invalid Blood Group"}]},xe={name:"medicalRecord",label:"Medical Record Number",type:"text",validation:[{type:"required",message:"Medical Record Number is required"},{type:"regex",pattern:"^[0-9]{6,12}$",message:"Invalid Medical Record Number (must be 6\u201312 digits)"},{type:"length",min:6,max:12,minMessage:"Medical Record Number must be at least 6 digits",maxMessage:"Medical Record Number must be at most 12 digits"}],min:6,max:12,allowedChars:/^[0-9]$/,messageOnInvalid:"Only digits are allowed"};var he={parseConfig:I,validateField:g,validateAll:y,FormRenderer:v,addCustom:q,removeCustom:O,getCustom:$,listCustom:N};0&&(module.exports={AadhaarField,AccountNumberField,AddressField,AgeField,AlternateEmailField,AlternatePhoneField,BloodGroupField,ConfirmPasswordField,DobField,EmailField,FormRenderer,GSTField,GenderField,HealthIDField,IFSCField,InsuranceField,MICRField,MedicalRecordField,NameField,OTPField,PANField,PasswordField,PatientIDField,PhoneField,PincodeField,UsernameField,addCustom,getCustom,listCustom,parseConfig,removeCustom,validateAll,validateField});
