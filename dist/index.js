import Z from"js-yaml";function q(e){if(typeof e=="object"&&e!==null)return e;let r=String(e||"");try{return Z.load(r)}catch(a){throw new Error("Invalid YAML/JSON config: "+a.message)}}var p=Object.create(null);p.isEven=e=>{let r=Number(String(e??"").trim());return!Number.isNaN(r)&&r%2===0};p.mustContainXYZ=e=>String(e??"").toUpperCase().includes("XYZ");p.afterDate=(e,r,a)=>{var t;if(!((t=a==null?void 0:a.extra)!=null&&t.after))return!1;let n=new Date(e),s=new Date(a.extra.after);return!Number.isNaN(n.getTime())&&n>s};p.matchesRegex=(e,r,a)=>{var t,i;let n=(t=a==null?void 0:a.extra)==null?void 0:t.pattern;if(!n)return!1;let s=((i=a==null?void 0:a.extra)==null?void 0:i.flags)??"";return new RegExp(n,s).test(String(e??""))};function I(e){return p[e]}function g(e,r={}){return e?e.replace(/\{(\w+)\}/g,(a,n)=>r[n]??""):""}function D(e,r){if(!e.when)return!0;let{field:a,equals:n,notEmpty:s,notEquals:t,in:i,notIn:m}=e.when,d=r==null?void 0:r[a];return n!==void 0?d===n:t!==void 0?d!==t:s?d!=null&&String(d).trim()!=="":Array.isArray(i)?i.includes(d):Array.isArray(m)?!m.includes(d):!0}async function S(e,r,a,n){if(!D(e,a))return{valid:!0};let s=String(r??"").trim();switch((n==null?void 0:n.type)==="email"&&(s=s.toLowerCase()),e.uppercase&&(s=s.toUpperCase()),e.type){case"required":return s===""?{valid:!1,message:e.message||"This field is required"}:{valid:!0};case"regex":{let t=e.flags||"",i=e.pattern||e.regex;try{return new RegExp(i,t).test(s)?{valid:!0}:{valid:!1,message:e.message||"Invalid format"}}catch{return{valid:!1,message:e.message||"Invalid regex pattern"}}}case"length":{let{min:t,max:i,eq:m}=e;return typeof m=="number"&&s.length!==m?{valid:!1,message:g(e.eqMessage||e.message||"Length must be {eq}",{eq:m})}:typeof t=="number"&&s.length<t?{valid:!1,message:g(e.minMessage||e.message||"Length must be \u2265 {min}",{min:t})}:typeof i=="number"&&s.length>i?{valid:!1,message:g(e.maxMessage||e.message||"Length must be \u2264 {max}",{max:i})}:{valid:!0}}case"numberRange":{let t=Number(s);if(isNaN(t))return{valid:!1,message:e.message||"Must be a number"};let{min:i,max:m}=e;return typeof i=="number"&&t<i?{valid:!1,message:g(e.minMessage||e.message||"Must be \u2265 {min}",{min:i})}:typeof m=="number"&&t>m?{valid:!1,message:g(e.maxMessage||e.message||"Must be \u2264 {max}",{max:m})}:{valid:!0}}case"crossField":{let t=a==null?void 0:a[e.field];return s===String(t??"")?{valid:!0}:{valid:!1,message:e.message||"Values must match"}}case"date":{if(!s)return{valid:!0};let t=new Date(s);if(Number.isNaN(t.getTime()))return{valid:!1,message:e.message||"Invalid date"};let i=new Date;return i.setHours(0,0,0,0),t>=i?{valid:!1,message:e.message||"Date must be before today"}:e.before&&t>=new Date(e.before)?{valid:!1,message:e.message||`Date must be before ${e.before}`}:e.after&&t<=new Date(e.after)?{valid:!1,message:e.message||`Date must be after ${e.after}`}:{valid:!0}}case"select":return s?(e.options||[]).includes(s)?{valid:!0}:{valid:!1,message:e.message||"Invalid selection"}:{valid:!0};case"custom":{let t=I(e.custom);if(typeof t!="function")return{valid:!1,message:e.message||`Unknown custom rule: ${e.custom}`};try{return await Promise.resolve(t(s,a,e))?{valid:!0}:{valid:!1,message:e.message||"Invalid value"}}catch{return{valid:!1,message:e.message||"Custom rule failed"}}}default:return{valid:!0}}}async function c(e,r,a={}){for(let n of e.validation||[]){let s=await S(n,r,a,e);if(!s.valid)return s}return{valid:!0}}async function x(e=[],r={}){let a={};for(let n of e){let s=await c(n,r[n.name],r);s.valid||(a[n.name]=s.message)}return{valid:Object.keys(a).length===0,errors:a}}import u,{useState as O}from"react";function f({config:e,onSubmit:r}){var d;let[a,n]=O({}),[s,t]=O({});if(!((d=e==null?void 0:e.fields)!=null&&d.length))return u.createElement("div",null,"No fields configured");let i=(l,o)=>{let y=l.target.value,b=y,v=!1;if(o.allowedChars){let C=y.split("").filter(F=>o.allowedChars.test(F)).join("");C!==y?(v=!0,b=C):b=y}let w={...a,[o.name]:b};n(w);let A=c(o,b,w);t({...s,[o.name]:v?o.messageOnInvalid||"Invalid character entered":A.valid?null:A.message})};return u.createElement("form",{onSubmit:l=>{l.preventDefault();let o=x(e.fields,a);t(o.errors),o.valid&&r(a)}},e.fields.map(l=>u.createElement("div",{key:l.name,style:{marginBottom:"1rem"}},u.createElement("label",null,l.label),u.createElement("input",{name:l.name,type:l.type||"text",value:a[l.name]||"",onChange:o=>i(o,l),maxLength:l.max||void 0}),s[l.name]&&u.createElement("div",{style:{color:"red"}},s[l.name]))),u.createElement("button",{type:"submit"},"Submit"))}var h={};function N(e,r){if(typeof e!="string"||typeof r!="function")throw new Error("addCustom requires a string key and a function");h[e]=r}function $(e){delete h[e]}function P(e){return h[e]}function M(){return Object.keys(h)}var H={name:"name",label:"Full Name",type:"text",validation:[{type:"required",message:"Name is required"},{type:"regex",pattern:"^[A-Za-z\\s]+$",message:"Name can only contain alphabets and spaces"},{type:"length",min:2,max:50,minMessage:"Name must be at least 2 characters",maxMessage:"Name must be at most 50 characters"}],max:50,allowedChars:/^[A-Za-z\s]$/,messageOnInvalid:"Only alphabets and spaces are allowed"},L={name:"pincode",label:"PIN Code",type:"text",validation:[{type:"required",message:"PIN Code is required"},{type:"regex",pattern:"^\\d{6}$",message:"PIN Code must be exactly 6 digits (numbers only)"},{type:"length",eq:6,eqMessage:"PIN Code must be exactly 6 digits"}],max:6,allowedChars:/^[0-9]$/,messageOnInvalid:"Only digits are allowed in PIN Code"},j={name:"email",label:"Email Address",type:"email",validation:[{type:"required",message:"Email is required"},{type:"regex",pattern:"^[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\\.[A-Za-z]{2,}$",message:"Invalid email address format"}],allowedChars:/^[A-Za-z0-9._%+-@]$/,messageOnInvalid:"Only letters, numbers, and email special characters are allowed"},V={name:"address",label:"Address",type:"text",validation:[{type:"required",message:"Address is required"},{type:"regex",pattern:"^[A-Za-z0-9\\s,.-]{5,100}$",message:"Address must be 5\u2013100 characters, alphanumeric only"},{type:"length",min:5,max:100,minMessage:"Address must be at least 5 characters",maxMessage:"Address must be at most 100 characters"}],max:100,allowedChars:/^[A-Za-z0-9\s,.-]$/,messageOnInvalid:"Only letters, numbers, spaces, commas, dots, and hyphens are allowed"},Y={name:"phone",label:"Phone Number",type:"tel",validation:[{type:"required",message:"Phone number is required"},{type:"regex",pattern:"^\\d{10}$",message:"Phone number must be exactly 10 digits"},{type:"length",eq:10,eqMessage:"Phone number must be exactly 10 digits"}],max:10,allowedChars:/^[0-9]$/,messageOnInvalid:"Only digits are allowed in Phone Number"},X={name:"gender",label:"Gender",type:"select",options:["Male","Female","Other"],validation:[{type:"required",message:"Gender is required"},{type:"select",options:["Male","Female","Other"],message:"Invalid Gender selection"}]},J={name:"password",label:"Password",type:"password",validation:[{type:"required",message:"Password is required"},{type:"regex",pattern:"^(?=.*[A-Z])(?=.*[a-z])(?=.*\\d)(?=.*[@$!%*?&])[A-Za-z\\d@$!%*?&]{8,}$",message:"Password must be at least 8 characters, include uppercase, lowercase, number, and special character"},{type:"length",min:8,minMessage:"Password must be at least 8 characters"}],min:8,allowedChars:/^[A-Za-z0-9@$!%*?&]$/,messageOnInvalid:"Only letters, numbers, and @$!%*?& characters are allowed"},K={name:"confirmPassword",label:"Confirm Password",type:"password",validation:[{type:"required",message:"Confirm Password is required"},{type:"crossField",field:"password",message:"Passwords must match"}],allowedChars:/^[A-Za-z0-9@$!%*?&]$/,messageOnInvalid:"Only letters, numbers, and @$!%*?& characters are allowed"},Q={name:"dob",label:"Date of Birth",type:"date",validation:[{type:"required",message:"Date of Birth is required"},{type:"date",message:"Date of Birth must be before today"}],max:new Date(Date.now()-864e5).toISOString().split("T")[0]},W={name:"username",label:"Username",type:"text",validation:[{type:"required",message:"Username is required"},{type:"regex",pattern:"^[A-Za-z0-9_]{5,20}$",message:"Username must be 5\u201320 characters, letters/numbers/underscores only"},{type:"length",min:5,max:20,minMessage:"Username must be at least 5 characters",maxMessage:"Username must be at most 20 characters"}],min:5,max:20,allowedChars:/^[A-Za-z0-9_]$/,messageOnInvalid:"Only letters, numbers, and underscores are allowed"},ee={name:"otp",label:"OTP",type:"text",validation:[{type:"required",message:"OTP is required"},{type:"regex",pattern:"^\\d{6}$",message:"OTP must be exactly 6 digits"},{type:"length",eq:6,eqMessage:"OTP must be exactly 6 digits"}],max:6,allowedChars:/^[0-9]$/,messageOnInvalid:"Only digits are allowed in OTP"},ae={name:"alternateEmail",label:"Alternate Email",type:"email",validation:[{type:"regex",pattern:"^[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\\.[A-Za-z]{2,}$",message:"Invalid email address format"}],allowedChars:/^[A-Za-z0-9._%+-@]$/,messageOnInvalid:"Only letters, numbers, and email special characters are allowed"},te={name:"alternatePhone",label:"Alternate Phone Number",type:"tel",validation:[{type:"regex",pattern:"^\\d{10}$",message:"Phone number must be exactly 10 digits"}],max:10,allowedChars:/^[0-9]$/,messageOnInvalid:"Only digits are allowed in Phone Number"},se={name:"age",label:"Age",type:"number",validation:[{type:"required",message:"Age is required"},{type:"numberRange",min:18,max:65,message:"Age must be between {min} and {max}"}]};var ne={name:"pan",label:"PAN Number",type:"text",validation:[{type:"required",message:"PAN is required"},{type:"regex",pattern:"^[A-Z]{5}[0-9]{4}[A-Z]$",message:"Invalid PAN format (e.g., ABCDE1234F)",uppercase:!0},{type:"length",eq:10,eqMessage:"PAN must be exactly 10 characters"}],min:10,max:10,allowedChars:/^[A-Z0-9]$/,messageOnInvalid:"Only uppercase letters and digits are allowed"},ie={name:"ifsc",label:"IFSC Code",type:"text",validation:[{type:"required",message:"IFSC Code is required"},{type:"regex",pattern:"^[A-Z]{4}0[A-Z0-9]{6}$",message:"Invalid IFSC format (e.g., SBIN0001234)",uppercase:!0},{type:"length",eq:11,eqMessage:"IFSC Code must be exactly 11 characters"}],min:11,max:11,allowedChars:/^[A-Z0-9]$/,messageOnInvalid:"Only uppercase letters and digits are allowed"},le={name:"aadhaar",label:"Aadhaar Number",type:"text",validation:[{type:"required",message:"Aadhaar is required"},{type:"regex",pattern:"^\\d{12}$",message:"Aadhaar must be exactly 12 digits"},{type:"length",eq:12,eqMessage:"Aadhaar must be exactly 12 digits"}],min:12,max:12,allowedChars:/^[0-9]$/,messageOnInvalid:"Only digits are allowed in Aadhaar Number"},me={name:"gst",label:"GST Number",type:"text",validation:[{type:"required",message:"GST Number is required"},{type:"regex",pattern:"^[0-9]{2}[A-Z]{5}[0-9]{4}[A-Z]{1}[1-9A-Z]{1}Z[0-9A-Z]{1}$",message:"Invalid GST format",uppercase:!0},{type:"length",eq:15,eqMessage:"GST Number must be exactly 15 characters"}],min:15,max:15,allowedChars:/^[A-Z0-9]$/,messageOnInvalid:"Only uppercase letters and digits are allowed"},oe={name:"accountNumber",label:"Bank Account Number",type:"text",validation:[{type:"required",message:"Account Number is required"},{type:"regex",pattern:"^[0-9]{9,18}$",message:"Account Number must be 9\u201318 digits"},{type:"length",min:9,max:18,minMessage:"Account Number must be at least 9 digits",maxMessage:"Account Number must be at most 18 digits"}],min:9,max:18,allowedChars:/^[0-9]$/,messageOnInvalid:"Only digits are allowed in Account Number"},de={name:"micr",label:"MICR Code",type:"text",validation:[{type:"required",message:"MICR Code is required"},{type:"regex",pattern:"^[0-9]{9}$",message:"MICR Code must be exactly 9 digits"},{type:"length",eq:9,eqMessage:"MICR Code must be exactly 9 digits"}],min:9,max:9,allowedChars:/^[0-9]$/,messageOnInvalid:"Only digits are allowed in MICR Code"};var pe={name:"patientId",label:"Patient ID",type:"text",validation:[{type:"required",message:"Patient ID is required"},{type:"regex",pattern:"^[A-Z0-9]{8}$",message:"Invalid Patient ID (must be 8 uppercase letters/digits)",uppercase:!0},{type:"length",eq:8,eqMessage:"Patient ID must be exactly 8 characters"}],min:8,max:8,allowedChars:/^[A-Z0-9]$/,messageOnInvalid:"Only uppercase letters and digits are allowed"},ge={name:"insurance",label:"Insurance Policy Number",type:"text",validation:[{type:"required",message:"Insurance Policy Number is required"},{type:"regex",pattern:"^[A-Z]{2}[0-9]{6}$",message:"Invalid Insurance Policy Number (e.g., AB123456)",uppercase:!0},{type:"length",eq:8,eqMessage:"Insurance Policy Number must be exactly 8 characters"}],min:8,max:8,allowedChars:/^[A-Z0-9]$/,messageOnInvalid:"Only uppercase letters and digits are allowed"},ce={name:"healthId",label:"Health ID",type:"text",validation:[{type:"required",message:"Health ID is required"},{type:"regex",pattern:"^[A-Z0-9]{10,16}$",message:"Invalid Health ID (must be 10\u201316 uppercase letters/digits)",uppercase:!0},{type:"length",min:10,max:16,minMessage:"Health ID must be at least 10 characters",maxMessage:"Health ID must be at most 16 characters"}],min:10,max:16,allowedChars:/^[A-Z0-9]$/,messageOnInvalid:"Only uppercase letters and digits are allowed"},ye={name:"bloodGroup",label:"Blood Group",type:"select",options:["A+","A-","B+","B-","O+","O-","AB+","AB-"],validation:[{type:"required",message:"Blood Group is required"},{type:"select",options:["A+","A-","B+","B-","O+","O-","AB+","AB-"],message:"Invalid Blood Group"}]},be={name:"medicalRecord",label:"Medical Record Number",type:"text",validation:[{type:"required",message:"Medical Record Number is required"},{type:"regex",pattern:"^[0-9]{6,12}$",message:"Invalid Medical Record Number (must be 6\u201312 digits)"},{type:"length",min:6,max:12,minMessage:"Medical Record Number must be at least 6 digits",maxMessage:"Medical Record Number must be at most 12 digits"}],min:6,max:12,allowedChars:/^[0-9]$/,messageOnInvalid:"Only digits are allowed"};var Ae={parseConfig:q,validateField:c,validateAll:x,FormRenderer:f,addCustom:N,removeCustom:$,getCustom:P,listCustom:M};export{le as AadhaarField,oe as AccountNumberField,V as AddressField,se as AgeField,ae as AlternateEmailField,te as AlternatePhoneField,ye as BloodGroupField,K as ConfirmPasswordField,Q as DobField,j as EmailField,f as FormRenderer,me as GSTField,X as GenderField,ce as HealthIDField,ie as IFSCField,ge as InsuranceField,de as MICRField,be as MedicalRecordField,H as NameField,ee as OTPField,ne as PANField,J as PasswordField,pe as PatientIDField,Y as PhoneField,L as PincodeField,W as UsernameField,N as addCustom,Ae as default,P as getCustom,M as listCustom,q as parseConfig,$ as removeCustom,x as validateAll,c as validateField};
