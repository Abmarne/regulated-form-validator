var B=Object.create;var h=Object.defineProperty;var T=Object.getOwnPropertyDescriptor;var V=Object.getOwnPropertyNames;var U=Object.getPrototypeOf,_=Object.prototype.hasOwnProperty;var R=(e,t)=>{for(var r in t)h(e,r,{get:t[r],enumerable:!0})},E=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of V(t))!_.call(e,s)&&s!==r&&h(e,s,{get:()=>t[s],enumerable:!(n=T(t,s))||n.enumerable});return e};var F=(e,t,r)=>(r=e!=null?B(U(e)):{},E(t||!e||!e.__esModule?h(r,"default",{value:e,enumerable:!0}):r,e)),X=e=>E(h({},"__esModule",{value:!0}),e);var H={};R(H,{FormRenderer:()=>x,addCustom:()=>$,default:()=>G,getCustom:()=>b,listCustom:()=>D,parseConfig:()=>S,removeCustom:()=>M,validateAll:()=>y,validateField:()=>p});module.exports=X(H);var k=F(require("js-yaml"),1);function S(e){if(typeof e=="object"&&e!==null)return e;let t=String(e||"");try{return k.default.load(t)}catch(r){throw new Error("Invalid YAML/JSON config: "+r.message)}}function C(e){return/^[A-Z]{5}[0-9]{4}[A-Z]$/.test(String(e||"").toUpperCase())}function N(e){return/^[A-Z]{4}0[A-Z0-9]{6}$/.test(String(e||"").toUpperCase())}function A(e){return/^\d{12}$/.test(String(e||""))}var g=Object.create(null);g.mustContainXYZ=e=>String(e??"").includes("XYZ");g.isEven=e=>{let t=Number(e);return Number.isNaN(t)?!1:t%2===0};g.afterDate=(e,t,r)=>{var i;if(!((i=r==null?void 0:r.extra)!=null&&i.after))return!1;let n=new Date(e),s=new Date(r.extra.after);return!Number.isNaN(n.getTime())&&n>s};g.matchesRegex=(e,t,r)=>{var i,o;let n=(i=r==null?void 0:r.extra)==null?void 0:i.pattern;if(!n)return!1;let s=((o=r==null?void 0:r.extra)==null?void 0:o.flags)??"";return new RegExp(n,s).test(String(e??""))};function $(e,t){if(typeof e!="string"||!e)throw new Error("Custom rule name must be a non-empty string");if(typeof t!="function")throw new Error("Custom rule must be a function");g[e]=t}function M(e){delete g[e]}function b(e){return g[e]}function D(){return Object.keys(g)}var q={pan:C,ifsc:N,aadhaar:A};function z(e,t){if(!e.when)return!0;let{field:r,equals:n,notEmpty:s,notEquals:i,in:o,notIn:v}=e.when,d=t==null?void 0:t[r];return n!==void 0?d===n:i!==void 0?d!==i:s?d!=null&&String(d).trim()!=="":Array.isArray(o)?o.includes(d):Array.isArray(v)?!v.includes(d):!0}function J(e,t,r){if(!z(e,r))return{valid:!0};switch(e.type){case"required":return t==null||String(t).trim()===""?{valid:!1,message:e.message||"This field is required"}:{valid:!0};case"regex":{let n=e.flags||"";return new RegExp(e.pattern,n).test(String(t??""))?{valid:!0}:{valid:!1,message:e.message||"Invalid format"}}case"length":{let n=String(t??""),{min:s,max:i,eq:o}=e;return typeof o=="number"&&n.length!==o?{valid:!1,message:e.message||`Length must be ${o}`}:typeof s=="number"&&n.length<s?{valid:!1,message:e.message||`Length must be \u2265 ${s}`}:typeof i=="number"&&n.length>i?{valid:!1,message:e.message||`Length must be \u2264 ${i}`}:{valid:!0}}case"enum":return(e.options||[]).includes(t)?{valid:!0}:{valid:!1,message:e.message||"Invalid value"};case"number":{let n=Number(t);return Number.isNaN(n)?{valid:!1,message:e.message||"Must be a number"}:e.min!=null&&n<e.min?{valid:!1,message:e.message||`Must be \u2265 ${e.min}`}:e.max!=null&&n>e.max?{valid:!1,message:e.message||`Must be \u2264 ${e.max}`}:{valid:!0}}case"date":{let n=new Date(t);if(Number.isNaN(n.getTime()))return{valid:!1,message:e.message||"Invalid date"};if(e.before&&n>=new Date(e.before))return{valid:!1,message:e.message||`Must be before ${e.before}`};if(e.after&&n<=new Date(e.after))return{valid:!1,message:e.message||`Must be after ${e.after}`};if(e.ageMin!=null){let s=new Date,i=s.getFullYear()-n.getFullYear(),o=s.getMonth()-n.getMonth();if((o<0||o===0&&s.getDate()<n.getDate())&&i--,i<e.ageMin)return{valid:!1,message:e.message||`Must be at least ${e.ageMin}`}}return{valid:!0}}case"crossField":{let n=r==null?void 0:r[e.field];return String(t??"")===String(n??"")?{valid:!0}:{valid:!1,message:e.message||"Values must match"}}case"custom":{let n=b(e.custom);return typeof n!="function"?{valid:!1,message:e.message||`Unknown custom rule: ${e.custom}`}:W(n,t,r,e)?{valid:!0}:{valid:!1,message:e.message||"Invalid value"}}default:return q[e.type]?q[e.type](t)?{valid:!0}:{valid:!1,message:e.message||"Invalid input"}:{valid:!0}}}function W(e,t,r,n){try{return!!e(t,r,n)}catch{return!1}}function p(e,t,r={}){for(let n of e.validation||[]){let s=J(n,t,r);if(!s.valid)return s}return{valid:!0}}function y(e=[],t={}){let r={};for(let n of e){let s=p(n,t[n.name],t);s.valid||(r[n.name]=s.message)}return{valid:Object.keys(r).length===0,errors:r}}var m=F(require("react"),1);function x({config:e,onSubmit:t,renderField:r}){let n=Array.isArray(e==null?void 0:e.fields)?e.fields:[],[s,i]=(0,m.useState)({}),[o,v]=(0,m.useState)({}),[d,I]=(0,m.useState)({}),Z=(a,f)=>{let l=f!=null&&f.target?f.target.value:f,c={...s,[a.name]:l};i(c);let u=p(a,l,c);v({...o,[a.name]:u.valid?null:u.message})},j=a=>I(f=>({...f,[a.name]:!0})),L=a=>{a.preventDefault();let f=y(n,s);v(f.errors),f.valid&&typeof t=="function"&&t(s)},O=(a,f,l,c)=>{let u={id:a.name,name:a.name,value:f??"",onChange:l,onBlur:c,"aria-invalid":!!o[a.name],"aria-describedby":o[a.name]?`${a.name}-error`:void 0};switch(a.type){case"select":return m.default.createElement("select",{...u},m.default.createElement("option",{value:""},"Select..."),(a.options||[]).map(w=>m.default.createElement("option",{key:w,value:w},w)));case"textarea":return m.default.createElement("textarea",{...u,rows:3});case"number":return m.default.createElement("input",{...u,type:"number"});case"date":return m.default.createElement("input",{...u,type:"date"});default:return m.default.createElement("input",{...u,type:a.type||"text"})}},Y=()=>{let a=Object.values(o).some(Boolean),l=n.filter(c=>(c.validation||[]).some(u=>u.type==="required"&&!u.when)).some(c=>{let u=s[c.name];return u==null||String(u).trim()===""});return a||l};return m.default.createElement("form",{onSubmit:L,noValidate:!0},n.map(a=>{let f=s[a.name],l=o[a.name],c=O(a,f,u=>Z(a,u),()=>j(a));return m.default.createElement("div",{key:a.name,style:{marginBottom:12}},m.default.createElement("label",{htmlFor:a.name,style:{display:"block",fontWeight:600}},a.label),r?r(a,c,l):c,d[a.name]&&l&&m.default.createElement("span",{id:`${a.name}-error`,style:{color:"crimson",fontSize:12}},l))}),m.default.createElement("button",{type:"submit",disabled:Y()},"Submit"))}var G={parseConfig:S,validateField:p,validateAll:y,FormRenderer:x,addCustom:$,removeCustom:M,getCustom:b,listCustom:D};0&&(module.exports={FormRenderer,addCustom,getCustom,listCustom,parseConfig,removeCustom,validateAll,validateField});
